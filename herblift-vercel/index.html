<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>HerbLift ‚Äì Find the Right Supplements for Your Needs</title>
<meta name="description" content="Discover natural supplements for sleep, energy, weight loss, joint pain & more. Research-backed recommendations with links to peer-reviewed studies. Free wellness guide." />
<meta name="keywords" content="natural supplements, vitamins, herbal remedies, sleep supplements, energy vitamins, weight loss supplements, joint pain relief, immune support, Herbalife alternative, natural health" />
<meta name="robots" content="index, follow" />
<meta name="author" content="HerbLift" />

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website" />
<meta property="og:url" content="https://herblift.com/" />
<meta property="og:title" content="HerbLift ‚Äì Natural Supplements Guide with Research" />
<meta property="og:description" content="Find the right supplements for your health goals. Research-backed recommendations, not hype. Free wellness guide." />
<meta property="og:image" content="https://herblift.com/og-image.png" />

<!-- Twitter -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="HerbLift ‚Äì Natural Supplements Guide" />
<meta name="twitter:description" content="Find supplements for sleep, energy, weight loss & more. Research-backed, not hype." />

<!-- Canonical -->
<link rel="canonical" href="https://herblift.com/" />

<!-- Structured Data for SEO -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "HerbLift",
  "url": "https://herblift.com",
  "description": "Natural supplements guide with research-backed recommendations",
  "potentialAction": {
    "@type": "SearchAction",
    "target": "https://herblift.com/?symptom={search_term_string}",
    "query-input": "required name=search_term_string"
  }
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "HerbLift",
  "url": "https://herblift.com",
  "description": "Helping people find natural wellness solutions with research-backed information"
}
</script>

<!-- Google Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Fraunces:wght@600;700&display=swap" rel="stylesheet">

<!-- Google Analytics 4 - Replace with your ID -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-XXXXXXXXXX');
</script>

<style>
  :root { 
    --primary: #2d6a4f;
    --primary-light: #40916c;
    --primary-dark: #1b4332;
    --accent: #95d5b2;
    --accent-light: #d8f3dc;
    --warm: #f4a261;
    --text: #1a1a2e;
    --muted: #5c5c6d;
    --bg: #fafdf9;
    --card: #fff;
    --border: #e8efe6;
  }
  
  * { box-sizing: border-box; }
  
  html, body { height: 100%; }
  
  body {
    margin: 0;
    font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, sans-serif;
    background-color: #f8fdf9;
    color: var(--text);
    line-height: 1.5;
  }
  
  /* Herbal apothecary background */
  body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-image: 
      /* Mortar and pestle watermark - large */
      url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='600' height='600' viewBox='0 0 600 600'%3E%3Cg fill='%232d6a4f' fill-opacity='0.12'%3E%3C!-- Mortar bowl --%3E%3Cellipse cx='300' cy='420' rx='120' ry='45'/%3E%3Cpath d='M180 420 Q180 320 210 270 Q250 220 300 220 Q350 220 390 270 Q420 320 420 420' fill='%232d6a4f' fill-opacity='0.10'/%3E%3Cpath d='M190 420 Q190 330 215 285 Q250 240 300 240 Q350 240 385 285 Q410 330 410 420' fill='none' stroke='%232d6a4f' stroke-width='4' stroke-opacity='0.12'/%3E%3C!-- Pestle --%3E%3Cellipse cx='380' cy='220' rx='18' ry='12' transform='rotate(-50 380 220)'/%3E%3Crect x='372' y='130' width='16' height='100' rx='8' transform='rotate(-50 380 180)'/%3E%3C!-- Herb sprigs around mortar --%3E%3Cpath d='M120 350 Q140 320 130 280 M130 280 Q120 290 110 285 M130 280 Q140 290 150 285 M130 300 Q115 305 108 295 M130 300 Q145 305 152 295' stroke='%232d6a4f' stroke-width='3' fill='none' stroke-opacity='0.12'/%3E%3Cpath d='M480 320 Q460 290 470 250 M470 250 Q480 260 490 255 M470 250 Q460 260 450 255 M470 270 Q485 275 492 265 M470 270 Q455 275 448 265' stroke='%232d6a4f' stroke-width='3' fill='none' stroke-opacity='0.12'/%3E%3C!-- Scattered leaves --%3E%3Cpath d='M80 150 Q110 120 140 140 Q110 160 80 150'/%3E%3Cpath d='M90 170 Q120 140 150 160 Q120 180 90 170'/%3E%3Cpath d='M500 100 Q530 70 560 90 Q530 110 500 100'/%3E%3Cpath d='M490 130 Q520 100 550 120 Q520 140 490 130'/%3E%3Cpath d='M60 480 Q90 450 120 470 Q90 490 60 480'/%3E%3Cpath d='M520 500 Q550 470 580 490 Q550 510 520 500'/%3E%3C!-- Small berries/seeds --%3E%3Ccircle cx='150' cy='250' r='8'/%3E%3Ccircle cx='168' cy='242' r='6'/%3E%3Ccircle cx='162' cy='265' r='5'/%3E%3Ccircle cx='450' cy='450' r='8'/%3E%3Ccircle cx='468' cy='442' r='6'/%3E%3Ccircle cx='462' cy='465' r='5'/%3E%3C!-- Lavender/herb stems --%3E%3Cpath d='M100 550 Q105 500 100 450' stroke='%232d6a4f' stroke-width='3' fill='none' stroke-opacity='0.10'/%3E%3Cellipse cx='100' cy='445' rx='6' ry='12'/%3E%3Cellipse cx='92' cy='465' rx='5' ry='10'/%3E%3Cellipse cx='108' cy='465' rx='5' ry='10'/%3E%3Cellipse cx='100' cy='485' rx='5' ry='10'/%3E%3C/g%3E%3C/svg%3E"),
      /* Scattered botanical pattern */
      url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200' viewBox='0 0 200 200'%3E%3Cg fill='%232d6a4f' fill-opacity='0.06'%3E%3Cpath d='M30 30 Q50 10 70 30 Q50 50 30 30'/%3E%3Cpath d='M150 50 Q170 30 190 50 Q170 70 150 50'/%3E%3Cpath d='M20 150 Q40 130 60 150 Q40 170 20 150'/%3E%3Cpath d='M140 170 Q160 150 180 170 Q160 190 140 170'/%3E%3Ccircle cx='100' cy='100' r='5'/%3E%3Ccircle cx='112' cy='92' r='4'/%3E%3Ccircle cx='92' cy='108' r='4'/%3E%3C/g%3E%3C/svg%3E"),
      /* Soft gradient base */
      linear-gradient(180deg, #f0f9f2 0%, #f8fdf9 30%, #fefefe 70%, #f5faf6 100%);
    background-attachment: fixed;
    background-position: center center, 0 0, 0 0;
    background-size: 600px 600px, 200px 200px, 100% 100%;
    z-index: -1;
    pointer-events: none;
  }
  
  .container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 20px;
  }
  
  /* Header */
  header {
    text-align: center;
    padding: 40px 20px 30px;
    position: relative;
    background: 
      url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='80' viewBox='0 0 120 80'%3E%3Cg stroke='%232d6a4f' stroke-opacity='0.12' fill='none' stroke-width='1.5'%3E%3Cpath d='M10 70 Q18 50 12 25 M12 25 Q5 32 -2 28 M12 25 Q19 32 26 28 M12 38 Q2 42 -3 35 M12 38 Q22 42 27 35 M12 50 Q4 53 0 48 M12 50 Q20 53 24 48'/%3E%3Ccircle cx='12' cy='18' r='5' fill='%232d6a4f' fill-opacity='0.08'/%3E%3Ccircle cx='5' cy='24' r='3' fill='%232d6a4f' fill-opacity='0.06'/%3E%3Ccircle cx='19' cy='24' r='3' fill='%232d6a4f' fill-opacity='0.06'/%3E%3C/g%3E%3C/svg%3E") left 20px top 10px no-repeat,
      url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='80' viewBox='0 0 120 80'%3E%3Cg stroke='%232d6a4f' stroke-opacity='0.12' fill='none' stroke-width='1.5' transform='scale(-1,1) translate(-120,0)'%3E%3Cpath d='M10 70 Q18 50 12 25 M12 25 Q5 32 -2 28 M12 25 Q19 32 26 28 M12 38 Q2 42 -3 35 M12 38 Q22 42 27 35 M12 50 Q4 53 0 48 M12 50 Q20 53 24 48'/%3E%3Ccircle cx='12' cy='18' r='5' fill='%232d6a4f' fill-opacity='0.08'/%3E%3Ccircle cx='5' cy='24' r='3' fill='%232d6a4f' fill-opacity='0.06'/%3E%3Ccircle cx='19' cy='24' r='3' fill='%232d6a4f' fill-opacity='0.06'/%3E%3C/g%3E%3C/svg%3E") right 20px top 10px no-repeat;
    background-size: 60px 50px;
  }
  
  .logo {
    font-family: 'Fraunces', Georgia, serif;
    font-size: 42px;
    font-weight: 700;
    color: var(--primary);
    margin: 0;
    letter-spacing: -1px;
    position: relative;
    display: inline-block;
  }
  
  /* Small leaf accent on logo */
  .logo::before {
    content: 'üåø';
    position: absolute;
    left: -35px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 24px;
    opacity: 0.7;
  }
  
  .logo span {
    color: var(--warm);
  }
  
  .tagline {
    color: var(--muted);
    font-size: 16px;
    margin-top: 6px;
  }
  
  /* Stats Bar */
  .stats-bar {
    display: flex;
    justify-content: center;
    gap: 32px;
    padding: 16px;
    background: #fff;
    border: 1px solid var(--border);
    border-radius: 16px;
    margin: 0 auto 24px;
    max-width: 700px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.03);
  }
  
  .stat {
    text-align: center;
    font-size: 15px;
    color: var(--muted);
  }
  
  .stat strong {
    color: var(--primary);
    font-weight: 700;
  }
  
  .stat-divider {
    width: 1px;
    background: var(--border);
  }
  
  /* Search Box */
  .search-box {
    background: #fff;
    border: 1px solid var(--border);
    border-radius: 20px;
    padding: 28px;
    margin: 0 auto 20px;
    max-width: 900px;
    box-shadow: 0 4px 20px rgba(45, 106, 79, 0.06);
  }
  
  .search-box .label {
    font-size: 14px;
    font-weight: 600;
    color: var(--text);
    margin-bottom: 10px;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  
  .search-row {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    justify-content: center;
    align-items: center;
  }
  
  .search-input {
    flex: 1;
    min-width: 280px;
    max-width: 400px;
    padding: 14px 18px;
    border: 2px solid var(--border);
    border-radius: 12px;
    font-size: 16px;
    font-family: inherit;
    transition: border-color 0.2s, box-shadow 0.2s;
  }
  
  .search-input:focus {
    outline: none;
    border-color: var(--primary-light);
    box-shadow: 0 0 0 3px var(--accent-light);
  }
  
  .search-input::placeholder {
    color: #aaa;
  }
  
  .select {
    padding: 14px 16px;
    border: 2px solid var(--border);
    border-radius: 12px;
    font-size: 15px;
    font-family: inherit;
    background: #fff;
    cursor: pointer;
    transition: border-color 0.2s;
  }
  
  .select:focus {
    outline: none;
    border-color: var(--primary-light);
  }
  
  .search-btn {
    padding: 14px 32px;
    background: var(--primary);
    color: #fff;
    border: none;
    border-radius: 12px;
    font-size: 16px;
    font-weight: 600;
    font-family: inherit;
    cursor: pointer;
    transition: background 0.2s, transform 0.15s;
  }
  
  .search-btn:hover {
    background: var(--primary-light);
    transform: translateY(-1px);
  }
  
  .search-btn:active {
    transform: translateY(0);
  }
  
  .search-btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none;
  }
  
  /* Symptom search box styling */
  .symptom-box {
    border-color: #fed7aa;
    background: linear-gradient(135deg, #fffaf5 0%, #fff 100%);
  }
  
  .symptom-input {
    border-color: #fed7aa !important;
  }
  
  .symptom-input:focus {
    border-color: #f59e0b !important;
    box-shadow: 0 0 0 3px #fef3c7 !important;
  }
  
  .symptom-btn {
    background: #d97706 !important;
  }
  
  .symptom-btn:hover {
    background: #b45309 !important;
  }
  
  .symptom-pill {
    padding: 6px 12px;
    border: 1px solid #fed7aa;
    border-radius: 20px;
    background: #fffbeb;
    color: #92400e;
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
  }
  
  .symptom-pill:hover {
    background: #fef3c7;
    border-color: #f59e0b;
  }
  
  .supplement-tag {
    display: inline-block;
    padding: 4px 10px;
    margin: 3px;
    background: var(--accent-light);
    border: 1px solid var(--accent);
    border-radius: 6px;
    font-size: 13px;
    color: var(--primary-dark);
    cursor: pointer;
    transition: all 0.2s;
  }
  
  .supplement-tag:hover {
    background: var(--accent);
  }
  
  /* Separator */
  .separator {
    display: flex;
    align-items: center;
    gap: 16px;
    max-width: 500px;
    margin: 24px auto;
  }
  
  .separator-line {
    flex: 1;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--border), transparent);
  }
  
  .separator-text {
    color: #bbb;
    font-size: 13px;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 1px;
  }
  
  /* Category Selection */
  .group {
    text-align: center;
    margin: 20px 0;
  }
  
  .group .label {
    font-size: 14px;
    font-weight: 600;
    color: var(--text);
    margin-bottom: 12px;
  }
  
  .pill-row {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    justify-content: center;
  }
  
  .pill {
    padding: 10px 18px;
    border: 2px solid var(--border);
    border-radius: 50px;
    background: #fff;
    color: var(--text);
    font-size: 14px;
    font-weight: 500;
    font-family: inherit;
    cursor: pointer;
    transition: all 0.2s;
  }
  
  .pill:hover {
    border-color: var(--accent);
    background: var(--accent-light);
  }
  
  .pill.active {
    background: var(--primary);
    color: #fff;
    border-color: var(--primary);
  }
  
  /* Filters Toolbar */
  .toolbar {
    display: none;
    flex-wrap: wrap;
    gap: 16px;
    align-items: flex-end;
    padding: 20px;
    background: #fff;
    border: 1px solid var(--border);
    border-radius: 16px;
    margin: 20px auto;
    max-width: 1200px;
  }
  
  .filter-group {
    display: flex;
    flex-direction: column;
    gap: 6px;
  }
  
  .filter-group .label {
    font-size: 12px;
    font-weight: 600;
    color: var(--muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }
  
  .refresh-btn {
    padding: 12px 20px;
    background: var(--accent-light);
    border: 2px solid var(--accent);
    border-radius: 10px;
    font-size: 14px;
    font-weight: 600;
    color: var(--primary-dark);
    cursor: pointer;
    transition: all 0.2s;
    margin-left: auto;
  }
  
  .refresh-btn:hover {
    background: var(--accent);
  }
  
  /* Status & Results */
  .status {
    text-align: center;
    color: var(--muted);
    font-size: 14px;
    margin: 16px 0;
  }
  
  /* Cards Grid */
  .cards {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 20px;
    padding: 10px 20px 40px;
    max-width: 1400px;
    margin: 0 auto;
  }
  
  .card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 16px;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    transition: transform 0.2s, box-shadow 0.2s;
  }
  
  .card:hover {
    transform: translateY(-4px);
    box-shadow: 0 12px 32px rgba(45, 106, 79, 0.1);
  }
  
  .thumb {
    aspect-ratio: 1/1;
    width: 100%;
    object-fit: contain;
    background: #f8faf8;
    padding: 16px;
  }
  
  .card .content {
    padding: 16px;
    display: flex;
    flex-direction: column;
    gap: 8px;
    flex: 1;
  }
  
  .title {
    font-weight: 600;
    font-size: 15px;
    line-height: 1.35;
    color: var(--text);
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  .meta {
    font-size: 13px;
    color: var(--muted);
  }
  
  .price {
    font-size: 22px;
    font-weight: 700;
    color: var(--primary);
    margin-top: auto;
  }
  
  .shipping {
    font-size: 13px;
    color: var(--primary-light);
    font-weight: 600;
  }
  
  .btn {
    display: block;
    text-align: center;
    padding: 12px 16px;
    border-radius: 10px;
    background: var(--primary);
    color: #fff;
    text-decoration: none;
    font-weight: 600;
    font-size: 14px;
    transition: background 0.2s;
    margin-top: 8px;
  }
  
  .btn:hover {
    background: var(--primary-light);
  }
  
  /* Pagination */
  .pagination {
    display: none;
    justify-content: center;
    align-items: center;
    gap: 16px;
    margin: 20px 0 40px;
  }
  
  .page-btn {
    padding: 12px 24px;
    border: 2px solid var(--border);
    border-radius: 10px;
    background: #fff;
    font-size: 14px;
    font-weight: 600;
    color: var(--text);
    cursor: pointer;
    transition: all 0.2s;
  }
  
  .page-btn:hover:not(:disabled) {
    border-color: var(--primary);
    color: var(--primary);
  }
  
  .page-btn:disabled {
    opacity: 0.4;
    cursor: not-allowed;
  }
  
  .page-info {
    font-size: 14px;
    color: var(--muted);
  }
  
  /* Footer */
  footer {
    text-align: center;
    padding: 40px 20px;
    border-top: 1px solid var(--border);
    margin-top: 40px;
    background: 
      url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='60' viewBox='0 0 200 60'%3E%3Cg stroke='%232d6a4f' stroke-opacity='0.1' fill='none' stroke-width='1'%3E%3Cpath d='M30 55 Q35 40 30 25 M30 25 Q25 30 20 27 M30 25 Q35 30 40 27 M30 35 Q23 38 18 33 M30 35 Q37 38 42 33'/%3E%3Cpath d='M170 55 Q165 40 170 25 M170 25 Q175 30 180 27 M170 25 Q165 30 160 27 M170 35 Q177 38 182 33 M170 35 Q163 38 158 33'/%3E%3Cpath d='M85 50 Q90 42 100 45 Q95 52 85 50'/%3E%3Cpath d='M115 50 Q110 42 100 45 Q105 52 115 50'/%3E%3Ccircle cx='100' cy='42' r='4' fill='%232d6a4f' fill-opacity='0.08'/%3E%3C/g%3E%3C/svg%3E") center top no-repeat,
      linear-gradient(180deg, #fff 0%, #f8fdf9 100%);
    background-size: 300px 60px, 100% 100%;
    position: relative;
  }
  
  .powered-by {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    color: var(--muted);
    font-size: 14px;
  }
  
  .powered-by img {
    height: 22px;
  }
  
  /* Responsive */
  @media (max-width: 600px) {
    .logo { font-size: 32px; }
    .stats-bar { flex-direction: column; gap: 12px; }
    .stat-divider { width: 60%; height: 1px; margin: 0 auto; }
    .search-input { min-width: 100%; }
    .cards { grid-template-columns: 1fr 1fr; gap: 12px; padding: 10px; }
    .card .content { padding: 12px; }
    .title { font-size: 13px; }
    .price { font-size: 18px; }
  }
</style>
</head>
<body>

<header>
  <h1 class="logo">Herb<span>Lift</span></h1>
  <p class="tagline">Find the right supplements for your needs ‚Äî with research to back it up</p>
</header>

<div class="container">
  <!-- Disclaimer Banner -->
  <div style="background: #fefce8; border: 1px solid #fef08a; border-radius: 10px; padding: 12px 16px; margin-bottom: 20px; font-size: 13px; color: #854d0e; text-align: center;">
    üìã <strong>Educational Resource:</strong> This site provides general wellness information only, not medical advice. Always consult a healthcare provider before starting supplements.
  </div>
  
  <!-- Live Inventory Stats -->
  <div class="stats-bar">
    <div class="stat"><span id="vitaminCount"><strong>...</strong></span> Vitamins</div>
    <div class="stat-divider"></div>
    <div class="stat"><span id="proteinCount"><strong>...</strong></span> Protein</div>
    <div class="stat-divider"></div>
    <div class="stat"><span id="herbalCount"><strong>...</strong></span> Herbal</div>
  </div>
  
  <!-- GUIDED FINDER - Main Feature -->
  <div class="search-box" id="guidedFinder" style="border: 2px solid var(--primary); background: linear-gradient(135deg, #f0fdf4 0%, #fff 100%);">
    <div class="label" style="font-size: 16px; color: var(--primary-dark);">
      üß≠ Wellness Guide ‚Äî Tell us what you're experiencing
    </div>
    <p style="font-size: 14px; color: var(--muted); margin: 8px 0 16px;">
      Describe your health goal or concern, and we'll suggest supplements that people commonly use ‚Äî plus links to the research.
    </p>
    
    <div id="chatArea" style="margin-bottom: 16px;">
      <!-- Chat messages will appear here -->
    </div>
    
    <div class="search-row">
      <input type="text" id="guidedInput" class="search-input" 
             placeholder="e.g., I have trouble sleeping, my joints hurt, I feel tired all the time..." 
             style="flex: 2; min-width: 300px;" />
      <button id="guidedSearchBtn" class="search-btn" style="background: var(--primary);">
        Find Supplements
      </button>
    </div>
    
    <div id="guidedSuggestions" style="margin-top: 12px;"></div>
    
    <!-- Quick concern buttons -->
    <div style="margin-top: 16px;">
      <div style="font-size: 12px; color: var(--muted); margin-bottom: 8px;">Common concerns:</div>
      <div class="pill-row" id="quickConcerns" style="justify-content: flex-start; gap: 8px;"></div>
    </div>
  </div>
  
  <div class="separator">
    <div class="separator-line"></div>
    <span class="separator-text">or search directly</span>
    <div class="separator-line"></div>
  </div>
  
  <!-- OPTION 1: Search by Supplement Name -->
  <div class="search-box">
    <div class="label">üíä Search by Supplement:</div>
    <div class="search-row">
      <select id="supplementSelect" class="search-input" style="cursor: pointer;">
        <option value="">-- Select a Supplement --</option>
        
        <optgroup label="üî∂ Vitamins">
          <option value="Vitamin A">Vitamin A</option>
          <option value="Vitamin B Complex">Vitamin B Complex</option>
          <option value="Vitamin B12">Vitamin B12</option>
          <option value="Vitamin C">Vitamin C</option>
          <option value="Vitamin D3">Vitamin D3</option>
          <option value="Vitamin E">Vitamin E</option>
          <option value="Vitamin K2">Vitamin K2</option>
          <option value="Multivitamin">Multivitamin</option>
          <option value="Prenatal Vitamin">Prenatal Vitamin</option>
        </optgroup>
        
        <optgroup label="‚ö° Minerals">
          <option value="Calcium">Calcium</option>
          <option value="Magnesium">Magnesium</option>
          <option value="Magnesium Glycinate">Magnesium Glycinate</option>
          <option value="Zinc">Zinc</option>
          <option value="Iron">Iron</option>
          <option value="Potassium">Potassium</option>
          <option value="Selenium">Selenium</option>
          <option value="Chromium">Chromium</option>
        </optgroup>
        
        <optgroup label="üåø Herbal & Adaptogens">
          <option value="Ashwagandha">Ashwagandha</option>
          <option value="Turmeric Curcumin">Turmeric Curcumin</option>
          <option value="Ginger">Ginger Root</option>
          <option value="Ginseng">Ginseng</option>
          <option value="Rhodiola">Rhodiola</option>
          <option value="Holy Basil">Holy Basil (Tulsi)</option>
          <option value="Maca Root">Maca Root</option>
          <option value="Valerian Root">Valerian Root</option>
          <option value="Echinacea">Echinacea</option>
          <option value="Elderberry">Elderberry</option>
          <option value="Milk Thistle">Milk Thistle</option>
          <option value="St Johns Wort">St. John's Wort</option>
          <option value="Saw Palmetto">Saw Palmetto</option>
          <option value="Ginkgo Biloba">Ginkgo Biloba</option>
        </optgroup>
        
        <optgroup label="üß† Brain & Focus">
          <option value="Lions Mane Mushroom">Lion's Mane Mushroom</option>
          <option value="Bacopa">Bacopa</option>
          <option value="L-Theanine">L-Theanine</option>
          <option value="Omega 3 DHA">Omega-3 DHA</option>
          <option value="Phosphatidylserine">Phosphatidylserine</option>
          <option value="Alpha GPC">Alpha GPC</option>
        </optgroup>
        
        <optgroup label="üò¥ Sleep & Relaxation">
          <option value="Melatonin">Melatonin</option>
          <option value="GABA">GABA</option>
          <option value="5-HTP">5-HTP</option>
          <option value="Chamomile">Chamomile</option>
          <option value="Passionflower">Passionflower</option>
          <option value="Lavender">Lavender</option>
        </optgroup>
        
        <optgroup label="üí™ Fitness & Protein">
          <option value="Whey Protein">Whey Protein</option>
          <option value="Plant Protein">Plant Protein</option>
          <option value="Casein Protein">Casein Protein</option>
          <option value="Creatine">Creatine</option>
          <option value="BCAAs">BCAAs</option>
          <option value="Pre Workout">Pre-Workout</option>
          <option value="L-Glutamine">L-Glutamine</option>
          <option value="Beta Alanine">Beta Alanine</option>
          <option value="Citrulline">Citrulline</option>
          <option value="HMB">HMB</option>
        </optgroup>
        
        <optgroup label="ü¶¥ Joint & Bone">
          <option value="Glucosamine">Glucosamine</option>
          <option value="Chondroitin">Chondroitin</option>
          <option value="MSM">MSM</option>
          <option value="Collagen">Collagen</option>
          <option value="Hyaluronic Acid">Hyaluronic Acid</option>
          <option value="Boswellia">Boswellia</option>
        </optgroup>
        
        <optgroup label="‚ù§Ô∏è Heart & Omega">
          <option value="Fish Oil Omega 3">Fish Oil Omega-3</option>
          <option value="Krill Oil">Krill Oil</option>
          <option value="CoQ10">CoQ10</option>
          <option value="Red Yeast Rice">Red Yeast Rice</option>
          <option value="Garlic">Garlic Extract</option>
          <option value="Hawthorn">Hawthorn</option>
          <option value="Niacin">Niacin (B3)</option>
        </optgroup>
        
        <optgroup label="ü¶† Gut & Digestive">
          <option value="Probiotic">Probiotic</option>
          <option value="Prebiotic">Prebiotic</option>
          <option value="Digestive Enzymes">Digestive Enzymes</option>
          <option value="Fiber Supplement">Fiber Supplement</option>
          <option value="Psyllium Husk">Psyllium Husk</option>
          <option value="L-Glutamine gut">L-Glutamine (Gut)</option>
        </optgroup>
        
        <optgroup label="üíá Hair, Skin & Nails">
          <option value="Biotin">Biotin</option>
          <option value="Collagen Peptides">Collagen Peptides</option>
          <option value="Keratin">Keratin</option>
          <option value="Silica">Silica</option>
        </optgroup>
        
        <optgroup label="üõ°Ô∏è Immune Support">
          <option value="Vitamin C immune">Vitamin C (Immune)</option>
          <option value="Zinc immune">Zinc (Immune)</option>
          <option value="Elderberry immune">Elderberry</option>
          <option value="Mushroom Complex">Mushroom Complex</option>
          <option value="Quercetin">Quercetin</option>
        </optgroup>
        
        <optgroup label="‚öñÔ∏è Weight & Blood Sugar">
          <option value="Green Tea Extract">Green Tea Extract</option>
          <option value="CLA">CLA</option>
          <option value="L-Carnitine">L-Carnitine</option>
          <option value="Berberine">Berberine</option>
          <option value="Glucomannan">Glucomannan</option>
          <option value="Cinnamon Extract">Cinnamon Extract</option>
        </optgroup>
        
        <optgroup label="üî¨ Amino Acids">
          <option value="L-Arginine">L-Arginine</option>
          <option value="L-Tyrosine">L-Tyrosine</option>
          <option value="NAC">NAC (N-Acetyl Cysteine)</option>
          <option value="Taurine">Taurine</option>
          <option value="Glycine">Glycine</option>
        </optgroup>
      </select>
      <button id="supplementSearchBtn" class="search-btn">Search</button>
    </div>
  </div>
  
  <div class="separator">
    <div class="separator-line"></div>
    <span class="separator-text">or browse by category</span>
    <div class="separator-line"></div>
  </div>
  
  <!-- OPTION 2: Category Pills -->
  <div class="group">
    <div class="label">Popular Categories:</div>
    <div id="categoryBar" class="pill-row"></div>
  </div>
  
  <!-- Brand Selection (shown after category) -->
  <div class="group" id="brandGroup" style="display:none">
    <div class="label">Filter by Brand:</div>
    <div id="brandBar" class="pill-row"></div>
  </div>
  
  <!-- Filters Toolbar -->
  <div class="toolbar" id="filters">
    <div class="filter-group">
      <div class="label">Category</div>
      <select id="typeSelect" class="select">
        <option value="vitamins">Vitamins & Multivitamins</option>
        <option value="protein">Protein & Fitness</option>
        <option value="herbal">Herbal Supplements</option>
        <option value="minerals">Minerals & Electrolytes</option>
        <option value="weight">Weight Management</option>
        <option value="immune">Immune Support</option>
        <option value="probiotics">Probiotics & Digestive</option>
        <option value="omega">Omega & Fish Oil</option>
      </select>
    </div>
    
    <div class="filter-group">
      <div class="label">Condition</div>
      <select id="conditionSelect" class="select">
        <option value="">Any</option>
        <option value="new">New Only</option>
      </select>
    </div>
    
    <div class="filter-group">
      <div class="label">Results</div>
      <select id="limitSelect" class="select">
        <option value="24">24</option>
        <option value="48">48</option>
        <option value="60" selected>60</option>
        <option value="100">100</option>
      </select>
    </div>
    
    <div class="filter-group">
      <div class="label">Sort</div>
      <select id="sortSelect" class="select">
        <option value="relevance">Relevance</option>
        <option value="price-low">Price: Low to High</option>
        <option value="price-high">Price: High to Low</option>
      </select>
    </div>
    
    <button class="refresh-btn" id="refreshBtn">üîÑ Refresh</button>
  </div>
  
  <div id="status" class="status"></div>
</div>

<!-- Pagination -->
<div class="pagination" id="pagination">
  <button class="page-btn" id="prevPage">‚Üê Previous</button>
  <span class="page-info" id="pageInfo">Page 1</span>
  <button class="page-btn" id="nextPage">Next ‚Üí</button>
</div>

<!-- Results Grid -->
<div class="cards" id="cards"></div>

<!-- Pagination Bottom -->
<div class="pagination" id="paginationBottom">
  <button class="page-btn" id="prevPageBottom">‚Üê Previous</button>
  <span class="page-info" id="pageInfoBottom">Page 1</span>
  <button class="page-btn" id="nextPageBottom">Next ‚Üí</button>
</div>

<footer>
  <div style="margin-bottom: 16px;">
    <span style="font-family: 'Fraunces', serif; font-size: 20px; color: var(--primary); font-weight: 600;">üåø Herb<span style="color: var(--warm);">Lift</span></span>
  </div>
  <div style="font-size: 13px; color: var(--muted); margin-bottom: 16px; max-width: 400px; margin-left: auto; margin-right: auto;">
    Helping you find natural wellness solutions with research-backed information.
  </div>
  <div style="margin-bottom: 16px;">
    <a href="/alternatives.html" style="color: var(--primary); font-size: 14px; text-decoration: none; margin: 0 12px;">MLM Alternatives</a>
    <span style="color: var(--border);">|</span>
    <a href="/?symptom=sleep" style="color: var(--primary); font-size: 14px; text-decoration: none; margin: 0 12px;">Sleep</a>
    <span style="color: var(--border);">|</span>
    <a href="/?symptom=energy" style="color: var(--primary); font-size: 14px; text-decoration: none; margin: 0 12px;">Energy</a>
    <span style="color: var(--border);">|</span>
    <a href="/?symptom=weight+loss" style="color: var(--primary); font-size: 14px; text-decoration: none; margin: 0 12px;">Weight Loss</a>
  </div>
  <div class="powered-by">
    <span>Products powered by</span>
    <img src="https://ir.ebaystatic.com/cr/v/c1/ebay-logo-1-1200x630-margin.png" alt="eBay">
  </div>
  <div style="font-size: 11px; color: var(--muted); margin-top: 16px;">
    ¬© 2025 HerbLift.com ‚Ä¢ For educational purposes only ‚Ä¢ Not medical advice
  </div>
</footer>

<script>
// Symptom to Supplement Mapping - EXPANDED
// NOTE: For educational/informational purposes only - not medical advice
const SYMPTOM_MAP = {
  // Sleep Issues
  'sleep': ['Melatonin', 'Magnesium Glycinate', 'Valerian Root', 'L-Theanine', 'GABA', 'Chamomile'],
  'insomnia': ['Melatonin', 'Magnesium Glycinate', 'Valerian Root', 'L-Theanine', 'GABA'],
  'can\'t sleep': ['Melatonin', 'Magnesium Glycinate', 'Valerian Root', 'L-Theanine'],
  'restless': ['Magnesium', 'Melatonin', 'Valerian Root', 'Passionflower'],
  'trouble sleeping': ['Melatonin', 'Magnesium', 'Valerian Root', 'L-Theanine', 'GABA'],
  'sleep quality': ['Magnesium Glycinate', 'L-Theanine', 'Ashwagandha', 'Melatonin'],
  
  // Energy & Fatigue
  'energy': ['B-Complex', 'Vitamin B12', 'Iron', 'CoQ10', 'Ashwagandha', 'Rhodiola'],
  'fatigue': ['B-Complex', 'Vitamin B12', 'Iron', 'CoQ10', 'Vitamin D3', 'Ashwagandha'],
  'tired': ['B-Complex', 'Vitamin B12', 'Iron', 'CoQ10', 'Vitamin D3'],
  'low energy': ['B-Complex', 'Vitamin B12', 'Iron', 'CoQ10', 'Ashwagandha'],
  'exhausted': ['B-Complex', 'Iron', 'Vitamin D3', 'Ashwagandha', 'Rhodiola'],
  'chronic fatigue': ['CoQ10', 'B-Complex', 'Vitamin D3', 'Magnesium', 'Rhodiola'],
  'weakness': ['Iron', 'Vitamin B12', 'Vitamin D3', 'Magnesium', 'Potassium'],
  'sluggish': ['B-Complex', 'Iron', 'Green Tea Extract', 'Rhodiola', 'Ginseng'],
  
  // Stress & Anxiety
  'stress': ['Ashwagandha', 'L-Theanine', 'Magnesium', 'Rhodiola', 'Holy Basil', 'GABA'],
  'anxiety': ['Ashwagandha', 'L-Theanine', 'Magnesium', 'GABA', 'Passionflower', 'Valerian'],
  'nervous': ['L-Theanine', 'Magnesium', 'GABA', 'Ashwagandha', 'Chamomile'],
  'calm': ['L-Theanine', 'Magnesium', 'Ashwagandha', 'GABA', 'Lavender'],
  'relax': ['Magnesium', 'L-Theanine', 'Ashwagandha', 'Chamomile', 'Valerian'],
  'panic': ['L-Theanine', 'GABA', 'Magnesium', 'Ashwagandha', 'Passionflower'],
  'overwhelmed': ['Ashwagandha', 'Rhodiola', 'L-Theanine', 'B-Complex', 'Magnesium'],
  'tension': ['Magnesium', 'L-Theanine', 'Valerian', 'Passionflower'],
  'irritable': ['Magnesium', 'B-Complex', 'Omega 3', 'Ashwagandha', 'L-Theanine'],
  'mood swings': ['Omega 3', 'Vitamin D3', 'B-Complex', 'Magnesium', '5-HTP'],
  
  // Joint & Pain
  'joint pain': ['Glucosamine', 'Chondroitin', 'MSM', 'Turmeric Curcumin', 'Omega 3 Fish Oil', 'Collagen'],
  'joints': ['Glucosamine', 'Chondroitin', 'MSM', 'Turmeric Curcumin', 'Collagen'],
  'arthritis': ['Glucosamine', 'Chondroitin', 'Turmeric Curcumin', 'Omega 3', 'MSM', 'Boswellia'],
  'inflammation': ['Turmeric Curcumin', 'Omega 3 Fish Oil', 'Boswellia', 'Ginger', 'Quercetin'],
  'stiff': ['Glucosamine', 'MSM', 'Turmeric Curcumin', 'Omega 3', 'Magnesium'],
  'knee pain': ['Glucosamine', 'Chondroitin', 'Collagen', 'MSM', 'Turmeric Curcumin'],
  'back pain': ['Magnesium', 'Turmeric Curcumin', 'Boswellia', 'Vitamin D3', 'Omega 3'],
  'muscle pain': ['Magnesium', 'Turmeric Curcumin', 'Tart Cherry', 'Omega 3', 'Vitamin D3'],
  'sore muscles': ['Magnesium', 'Tart Cherry', 'BCAAs', 'Turmeric Curcumin', 'Omega 3'],
  'cramps': ['Magnesium', 'Potassium', 'Calcium', 'Vitamin D3', 'Electrolytes'],
  'muscle cramps': ['Magnesium', 'Potassium', 'Calcium', 'Electrolytes', 'Vitamin D3'],
  'headache': ['Magnesium', 'Riboflavin B2', 'CoQ10', 'Feverfew', 'Butterbur'],
  'migraine': ['Magnesium', 'Riboflavin B2', 'CoQ10', 'Feverfew', 'Butterbur'],
  
  // Digestion
  'digestion': ['Probiotic', 'Digestive Enzymes', 'Ginger', 'Peppermint', 'Fiber'],
  'bloating': ['Probiotic', 'Digestive Enzymes', 'Ginger', 'Peppermint', 'Activated Charcoal'],
  'gut health': ['Probiotic', 'Prebiotic', 'L-Glutamine', 'Digestive Enzymes', 'Fiber'],
  'constipation': ['Magnesium', 'Fiber', 'Probiotic', 'Aloe Vera', 'Psyllium'],
  'ibs': ['Probiotic', 'Peppermint Oil', 'L-Glutamine', 'Digestive Enzymes', 'Fiber'],
  'stomach': ['Probiotic', 'Digestive Enzymes', 'Ginger', 'DGL Licorice', 'Peppermint'],
  'heartburn': ['DGL Licorice', 'Digestive Enzymes', 'Ginger', 'Slippery Elm', 'Aloe Vera'],
  'acid reflux': ['DGL Licorice', 'Digestive Enzymes', 'Aloe Vera', 'Slippery Elm', 'Probiotics'],
  'nausea': ['Ginger', 'Peppermint', 'Vitamin B6', 'Probiotics'],
  'gas': ['Digestive Enzymes', 'Probiotics', 'Peppermint', 'Activated Charcoal', 'Ginger'],
  'leaky gut': ['L-Glutamine', 'Probiotics', 'Zinc', 'Collagen', 'Slippery Elm'],
  'indigestion': ['Digestive Enzymes', 'Ginger', 'Peppermint', 'Probiotics'],
  
  // Immune System
  'immune': ['Vitamin C', 'Vitamin D3', 'Zinc', 'Elderberry', 'Echinacea', 'Probiotics'],
  'cold': ['Vitamin C', 'Zinc', 'Elderberry', 'Echinacea', 'Garlic'],
  'flu': ['Vitamin C', 'Zinc', 'Elderberry', 'Echinacea', 'Vitamin D3'],
  'sick': ['Vitamin C', 'Zinc', 'Elderberry', 'Echinacea', 'Probiotics'],
  'immunity': ['Vitamin C', 'Vitamin D3', 'Zinc', 'Elderberry', 'Mushroom Complex'],
  'infection': ['Vitamin C', 'Zinc', 'Garlic', 'Oregano Oil', 'Echinacea'],
  'sinus': ['Vitamin C', 'Quercetin', 'Bromelain', 'NAC', 'Eucalyptus'],
  'allergies': ['Quercetin', 'Vitamin C', 'Bromelain', 'Stinging Nettle', 'Butterbur'],
  'sore throat': ['Zinc', 'Vitamin C', 'Elderberry', 'Slippery Elm', 'Echinacea'],
  
  // Brain & Focus
  'focus': ['Lion\'s Mane', 'Omega 3 DHA', 'Bacopa', 'Ginkgo Biloba', 'L-Tyrosine'],
  'memory': ['Lion\'s Mane', 'Omega 3 DHA', 'Bacopa', 'Ginkgo Biloba', 'Phosphatidylserine'],
  'brain fog': ['Lion\'s Mane', 'Omega 3', 'B-Complex', 'Vitamin D3', 'CoQ10'],
  'concentration': ['Lion\'s Mane', 'Bacopa', 'L-Tyrosine', 'Ginkgo Biloba', 'Rhodiola'],
  'mental clarity': ['Lion\'s Mane', 'Omega 3', 'Bacopa', 'Ginkgo Biloba', 'L-Theanine'],
  'cognitive': ['Lion\'s Mane', 'Omega 3 DHA', 'Bacopa', 'Phosphatidylserine', 'Ginkgo Biloba'],
  'learning': ['Bacopa', 'Lion\'s Mane', 'Omega 3 DHA', 'Ginkgo Biloba', 'Phosphatidylserine'],
  'dementia': ['Lion\'s Mane', 'Omega 3 DHA', 'Phosphatidylserine', 'Ginkgo Biloba', 'Vitamin E', 'Curcumin'],
  'alzheimer': ['Lion\'s Mane', 'Omega 3 DHA', 'Phosphatidylserine', 'Vitamin E', 'Curcumin', 'Ginkgo Biloba'],
  'alzheimers': ['Lion\'s Mane', 'Omega 3 DHA', 'Phosphatidylserine', 'Vitamin E', 'Curcumin', 'Ginkgo Biloba'],
  'cognitive decline': ['Lion\'s Mane', 'Omega 3 DHA', 'Phosphatidylserine', 'Bacopa', 'Ginkgo Biloba'],
  'forgetful': ['Lion\'s Mane', 'Omega 3 DHA', 'Bacopa', 'Ginkgo Biloba', 'Phosphatidylserine'],
  'brain health': ['Lion\'s Mane', 'Omega 3 DHA', 'Phosphatidylserine', 'Bacopa', 'Vitamin E'],
  
  // Heart Health & Blood Pressure
  'heart': ['Omega 3 Fish Oil', 'CoQ10', 'Magnesium', 'Vitamin K2', 'Garlic'],
  'cholesterol': ['Omega 3 Fish Oil', 'Red Yeast Rice', 'Niacin', 'Plant Sterols', 'Fiber'],
  'high cholesterol': ['Red Yeast Rice', 'Omega 3 Fish Oil', 'Niacin', 'Plant Sterols', 'Berberine'],
  'triglycerides': ['Omega 3 Fish Oil', 'Niacin', 'Berberine', 'Garlic', 'Fiber'],
  'blood pressure': ['Magnesium', 'CoQ10', 'Omega 3', 'Garlic', 'Potassium', 'Hibiscus'],
  'high blood pressure': ['Magnesium', 'CoQ10', 'Garlic', 'Potassium', 'Hibiscus', 'Omega 3'],
  'hypertension': ['Magnesium', 'CoQ10', 'Garlic', 'Potassium', 'Hibiscus', 'Omega 3', 'Hawthorn'],
  'circulation': ['Omega 3', 'Vitamin E', 'Ginkgo Biloba', 'Cayenne', 'Niacin'],
  'blood flow': ['Ginkgo Biloba', 'L-Arginine', 'Omega 3', 'Vitamin E', 'Cayenne'],
  'heart palpitations': ['Magnesium', 'CoQ10', 'Potassium', 'Hawthorn', 'Omega 3'],
  
  // Skin, Hair, Nails
  'skin': ['Collagen', 'Vitamin C', 'Vitamin E', 'Biotin', 'Hyaluronic Acid', 'Zinc'],
  'hair': ['Biotin', 'Collagen', 'Vitamin D3', 'Iron', 'Zinc', 'Keratin'],
  'hair loss': ['Biotin', 'Saw Palmetto', 'Iron', 'Vitamin D3', 'Zinc', 'Collagen'],
  'thinning hair': ['Biotin', 'Saw Palmetto', 'Collagen', 'Iron', 'Zinc', 'Vitamin D3'],
  'nails': ['Biotin', 'Collagen', 'Silica', 'Vitamin E', 'Zinc'],
  'brittle nails': ['Biotin', 'Collagen', 'Silica', 'Iron', 'Zinc'],
  'acne': ['Zinc', 'Vitamin A', 'Probiotics', 'Omega 3', 'Vitamin D3'],
  'wrinkles': ['Collagen', 'Vitamin C', 'Hyaluronic Acid', 'Vitamin E', 'CoQ10'],
  'anti aging': ['Collagen', 'Vitamin C', 'CoQ10', 'Resveratrol', 'Hyaluronic Acid'],
  'dry skin': ['Omega 3', 'Vitamin E', 'Hyaluronic Acid', 'Collagen', 'Evening Primrose'],
  'eczema': ['Omega 3', 'Probiotics', 'Vitamin D3', 'Evening Primrose', 'Zinc'],
  'psoriasis': ['Omega 3', 'Vitamin D3', 'Probiotics', 'Turmeric Curcumin', 'Aloe Vera'],
  
  // Weight & Metabolism
  'weight loss': ['Green Tea Extract', 'CLA', 'L-Carnitine', 'Garcinia Cambogia', 'Fiber'],
  'metabolism': ['Green Tea Extract', 'B-Complex', 'Iron', 'Capsaicin', 'L-Carnitine'],
  'appetite': ['Glucomannan', 'Fiber', 'Garcinia Cambogia', 'Chromium', '5-HTP'],
  'fat burn': ['Green Tea Extract', 'CLA', 'L-Carnitine', 'Caffeine', 'Capsaicin'],
  'weight management': ['Green Tea Extract', 'Fiber', 'Chromium', 'CLA', 'Probiotics'],
  'cravings': ['Chromium', 'Gymnema', '5-HTP', 'L-Glutamine', 'Fiber'],
  'sugar cravings': ['Chromium', 'Gymnema', 'Berberine', 'L-Glutamine', 'Cinnamon'],
  
  // Muscle & Fitness
  'muscle': ['Whey Protein', 'Creatine', 'BCAAs', 'HMB', 'Glutamine'],
  'workout': ['Pre Workout', 'Creatine', 'BCAAs', 'Beta Alanine', 'Citrulline'],
  'recovery': ['BCAAs', 'Glutamine', 'Tart Cherry', 'Magnesium', 'Protein'],
  'strength': ['Creatine', 'Protein', 'HMB', 'Beta Alanine', 'Vitamin D3'],
  'endurance': ['Beta Alanine', 'Citrulline', 'Beetroot', 'Iron', 'B-Complex'],
  'muscle building': ['Whey Protein', 'Creatine', 'BCAAs', 'HMB', 'Vitamin D3'],
  'post workout': ['Whey Protein', 'BCAAs', 'Glutamine', 'Tart Cherry', 'Electrolytes'],
  
  // Hormones & Mood
  'mood': ['Vitamin D3', 'Omega 3', 'B-Complex', 'SAMe', '5-HTP', 'St John\'s Wort'],
  'depression': ['Vitamin D3', 'Omega 3', 'SAMe', '5-HTP', 'St John\'s Wort', 'B-Complex'],
  'hormones': ['DIM', 'Vitex', 'Maca', 'Evening Primrose', 'Black Cohosh'],
  'menopause': ['Black Cohosh', 'Evening Primrose', 'Red Clover', 'Vitamin E', 'Maca'],
  'hot flashes': ['Black Cohosh', 'Evening Primrose', 'Red Clover', 'Vitamin E', 'Soy Isoflavones'],
  'pms': ['Vitex', 'Evening Primrose', 'Magnesium', 'Calcium', 'B6'],
  'period cramps': ['Magnesium', 'Omega 3', 'Vitamin B1', 'Ginger', 'Evening Primrose'],
  'testosterone': ['Ashwagandha', 'Fenugreek', 'Zinc', 'Vitamin D3', 'Tongkat Ali'],
  'libido': ['Maca', 'Ashwagandha', 'Tribulus', 'L-Arginine', 'Ginseng'],
  'low libido': ['Maca', 'Tribulus', 'Ashwagandha', 'Ginseng', 'L-Arginine'],
  'erectile': ['L-Arginine', 'Maca', 'Ginseng', 'Horny Goat Weed', 'Zinc'],
  'fertility': ['Folate', 'CoQ10', 'Zinc', 'Vitamin D3', 'Omega 3', 'Maca'],
  
  // Eyes
  'eyes': ['Lutein', 'Zeaxanthin', 'Bilberry', 'Vitamin A', 'Omega 3'],
  'vision': ['Lutein', 'Zeaxanthin', 'Bilberry', 'Vitamin A', 'Astaxanthin'],
  'eye strain': ['Lutein', 'Bilberry', 'Omega 3', 'Vitamin A'],
  'dry eyes': ['Omega 3', 'Vitamin A', 'Lutein', 'Flaxseed Oil'],
  'macular': ['Lutein', 'Zeaxanthin', 'Omega 3', 'Vitamin C', 'Vitamin E', 'Zinc'],
  
  // Bones
  'bones': ['Calcium', 'Vitamin D3', 'Vitamin K2', 'Magnesium', 'Collagen'],
  'osteoporosis': ['Calcium', 'Vitamin D3', 'Vitamin K2', 'Magnesium', 'Boron'],
  'bone density': ['Calcium', 'Vitamin D3', 'Vitamin K2', 'Magnesium', 'Collagen'],
  'fracture': ['Calcium', 'Vitamin D3', 'Vitamin K2', 'Collagen', 'Boron'],
  
  // Blood Sugar
  'blood sugar': ['Berberine', 'Chromium', 'Cinnamon', 'Alpha Lipoic Acid', 'Gymnema'],
  'diabetes': ['Berberine', 'Chromium', 'Alpha Lipoic Acid', 'Cinnamon', 'Bitter Melon'],
  'insulin': ['Berberine', 'Chromium', 'Alpha Lipoic Acid', 'Gymnema', 'Cinnamon'],
  'glucose': ['Berberine', 'Chromium', 'Cinnamon', 'Alpha Lipoic Acid', 'Fenugreek'],
  'prediabetes': ['Berberine', 'Chromium', 'Cinnamon', 'Fiber', 'Alpha Lipoic Acid'],
  
  // Liver & Detox
  'liver': ['Milk Thistle', 'NAC', 'Dandelion Root', 'Artichoke', 'Alpha Lipoic Acid'],
  'detox': ['Milk Thistle', 'NAC', 'Chlorella', 'Spirulina', 'Dandelion'],
  'cleanse': ['Milk Thistle', 'Dandelion', 'Fiber', 'Probiotics', 'Chlorella'],
  'hangover': ['NAC', 'Milk Thistle', 'B-Complex', 'Electrolytes', 'Vitamin C'],
  
  // Thyroid
  'thyroid': ['Selenium', 'Zinc', 'Iodine', 'Vitamin D3', 'Ashwagandha'],
  'hypothyroid': ['Selenium', 'Zinc', 'Iodine', 'Vitamin D3', 'B-Complex'],
  'hashimoto': ['Selenium', 'Vitamin D3', 'Zinc', 'Omega 3', 'Probiotics'],
  
  // Prostate
  'prostate': ['Saw Palmetto', 'Beta Sitosterol', 'Pygeum', 'Zinc', 'Lycopene'],
  'enlarged prostate': ['Saw Palmetto', 'Beta Sitosterol', 'Pygeum', 'Stinging Nettle', 'Zinc'],
  'bph': ['Saw Palmetto', 'Beta Sitosterol', 'Pygeum', 'Pumpkin Seed', 'Zinc'],
  'urinary': ['Saw Palmetto', 'Cranberry', 'Pumpkin Seed', 'Beta Sitosterol'],
  
  // Women's Health
  'pregnancy': ['Prenatal Vitamin', 'Folate', 'Iron', 'DHA Omega 3', 'Vitamin D3'],
  'prenatal': ['Prenatal Vitamin', 'Folate', 'Iron', 'DHA', 'Calcium'],
  'breastfeeding': ['Postnatal Vitamin', 'DHA', 'Calcium', 'Vitamin D3', 'Fenugreek'],
  'pcos': ['Inositol', 'Berberine', 'Vitamin D3', 'Omega 3', 'NAC'],
  'endometriosis': ['Omega 3', 'NAC', 'Turmeric Curcumin', 'Vitamin D3', 'Magnesium'],
  
  // Respiratory
  'breathing': ['NAC', 'Vitamin D3', 'Quercetin', 'Omega 3', 'Magnesium'],
  'asthma': ['Vitamin D3', 'Magnesium', 'Omega 3', 'Quercetin', 'Vitamin C'],
  'copd': ['NAC', 'Vitamin D3', 'CoQ10', 'Omega 3', 'Magnesium'],
  'lung health': ['NAC', 'Vitamin D3', 'Vitamin C', 'Quercetin', 'Omega 3'],
  
  // Aging & Longevity
  'aging': ['CoQ10', 'Resveratrol', 'NMN', 'Collagen', 'Vitamin D3', 'Omega 3'],
  'longevity': ['NMN', 'Resveratrol', 'CoQ10', 'Omega 3', 'Vitamin D3'],
  
  // General Wellness
  'overall health': ['Multivitamin', 'Omega 3', 'Vitamin D3', 'Probiotics', 'Magnesium'],
  'general wellness': ['Multivitamin', 'Omega 3', 'Vitamin D3', 'Probiotics'],
  'daily health': ['Multivitamin', 'Omega 3', 'Vitamin D3', 'Probiotics', 'Magnesium'],
  'preventive': ['Multivitamin', 'Vitamin D3', 'Omega 3', 'Probiotics', 'Vitamin C']
};

// Supplement info with research context (brief, educational)
const SUPPLEMENT_INFO = {
  'Melatonin': { use: 'Sleep hormone regulation', pubmed: 'melatonin+sleep' },
  'Magnesium': { use: 'Muscle relaxation, nerve function, 300+ enzyme reactions', pubmed: 'magnesium+supplement' },
  'Magnesium Glycinate': { use: 'Highly absorbable form, calming, sleep support', pubmed: 'magnesium+glycinate' },
  'Valerian Root': { use: 'Traditional herb for sleep and relaxation', pubmed: 'valerian+sleep' },
  'L-Theanine': { use: 'Amino acid from tea, promotes calm focus', pubmed: 'l-theanine+anxiety' },
  'GABA': { use: 'Inhibitory neurotransmitter, calming effect', pubmed: 'gaba+supplement' },
  'Ashwagandha': { use: 'Adaptogen for stress, cortisol support', pubmed: 'ashwagandha+stress' },
  'Rhodiola': { use: 'Adaptogen for energy and stress resilience', pubmed: 'rhodiola+fatigue' },
  'B-Complex': { use: 'Energy metabolism, nerve function', pubmed: 'vitamin+b+complex+energy' },
  'Vitamin B12': { use: 'Energy, nerve health, red blood cells', pubmed: 'vitamin+b12+deficiency' },
  'Vitamin D3': { use: 'Bone health, immune function, mood', pubmed: 'vitamin+d3+supplementation' },
  'Iron': { use: 'Oxygen transport, energy production', pubmed: 'iron+supplement+fatigue' },
  'CoQ10': { use: 'Cellular energy, heart health, antioxidant', pubmed: 'coq10+supplement' },
  'Omega 3': { use: 'Heart, brain, inflammation support', pubmed: 'omega+3+fatty+acids' },
  'Fish Oil': { use: 'EPA/DHA for heart and brain health', pubmed: 'fish+oil+cardiovascular' },
  'Turmeric Curcumin': { use: 'Anti-inflammatory, joint support', pubmed: 'curcumin+inflammation' },
  'Glucosamine': { use: 'Joint cartilage support', pubmed: 'glucosamine+osteoarthritis' },
  'Chondroitin': { use: 'Joint health, often paired with glucosamine', pubmed: 'chondroitin+joint' },
  'MSM': { use: 'Sulfur compound for joints and inflammation', pubmed: 'msm+joint+pain' },
  'Collagen': { use: 'Skin, joint, gut support', pubmed: 'collagen+supplement' },
  'Probiotic': { use: 'Gut bacteria balance, digestive health', pubmed: 'probiotics+gut+health' },
  'Digestive Enzymes': { use: 'Help break down food, reduce bloating', pubmed: 'digestive+enzymes' },
  'Fiber': { use: 'Digestive regularity, blood sugar support', pubmed: 'fiber+supplement' },
  'Vitamin C': { use: 'Immune support, antioxidant, collagen production', pubmed: 'vitamin+c+immune' },
  'Zinc': { use: 'Immune function, wound healing, taste/smell', pubmed: 'zinc+immune+system' },
  'Elderberry': { use: 'Traditional immune support berry', pubmed: 'elderberry+immune' },
  'Echinacea': { use: 'Herb traditionally used for colds', pubmed: 'echinacea+cold' },
  'Lion\'s Mane': { use: 'Mushroom for brain and nerve health', pubmed: 'lions+mane+cognitive' },
  'Bacopa': { use: 'Ayurvedic herb for memory and learning', pubmed: 'bacopa+memory' },
  'Ginkgo Biloba': { use: 'Circulation and cognitive support', pubmed: 'ginkgo+biloba+cognition' },
  'Garlic': { use: 'Heart health, blood pressure, immune', pubmed: 'garlic+blood+pressure' },
  'Hawthorn': { use: 'Traditional heart and blood pressure herb', pubmed: 'hawthorn+cardiovascular' },
  'Hibiscus': { use: 'Blood pressure support, antioxidant', pubmed: 'hibiscus+blood+pressure' },
  'Potassium': { use: 'Electrolyte, blood pressure, muscle function', pubmed: 'potassium+blood+pressure' },
  'Berberine': { use: 'Blood sugar and metabolic support', pubmed: 'berberine+glucose' },
  'Chromium': { use: 'Blood sugar regulation, insulin sensitivity', pubmed: 'chromium+blood+sugar' },
  'Biotin': { use: 'Hair, skin, nail support', pubmed: 'biotin+hair' },
  'Saw Palmetto': { use: 'Prostate and urinary health', pubmed: 'saw+palmetto+prostate' },
  'Milk Thistle': { use: 'Liver support and detoxification', pubmed: 'milk+thistle+liver' },
  'NAC': { use: 'Antioxidant, liver and lung support', pubmed: 'n-acetyl+cysteine' },
  'Creatine': { use: 'Muscle strength, power, and recovery', pubmed: 'creatine+muscle' },
  'Whey Protein': { use: 'Muscle building, recovery', pubmed: 'whey+protein+muscle' },
  'BCAAs': { use: 'Muscle recovery, reduce soreness', pubmed: 'bcaa+muscle+recovery' },
  'Maca': { use: 'Energy, libido, hormone balance', pubmed: 'maca+root' },
  'Black Cohosh': { use: 'Menopause symptom support', pubmed: 'black+cohosh+menopause' },
  'Evening Primrose': { use: 'GLA for hormones, skin, PMS', pubmed: 'evening+primrose+oil' },
  'Lutein': { use: 'Eye health, macular support', pubmed: 'lutein+eye+health' },
  'Calcium': { use: 'Bone health, muscle function', pubmed: 'calcium+bone+health' },
  'Vitamin K2': { use: 'Directs calcium to bones, heart health', pubmed: 'vitamin+k2+bone' },
  
  // Weight Loss & Metabolism
  'Green Tea Extract': { use: 'Metabolism boost, fat oxidation, antioxidant', pubmed: 'green+tea+extract+weight+loss' },
  'CLA': { use: 'Conjugated linoleic acid for body composition', pubmed: 'cla+weight+loss' },
  'L-Carnitine': { use: 'Transports fatty acids for energy, fat burning', pubmed: 'l-carnitine+fat+loss' },
  'Garcinia Cambogia': { use: 'Appetite suppression, blocks fat production', pubmed: 'garcinia+cambogia+weight' },
  'Glucomannan': { use: 'Fiber that expands in stomach, reduces appetite', pubmed: 'glucomannan+weight+loss' },
  'Caffeine': { use: 'Energy boost, metabolism increase, appetite control', pubmed: 'caffeine+metabolism' },
  'Capsaicin': { use: 'From hot peppers, boosts metabolism and fat burning', pubmed: 'capsaicin+weight+loss' },
  
  // Digestive
  'Fiber': { use: 'Digestive regularity, blood sugar control, satiety', pubmed: 'fiber+supplement+health' },
  'Ginger': { use: 'Digestive aid, anti-nausea, anti-inflammatory', pubmed: 'ginger+digestion' },
  'Peppermint': { use: 'Digestive comfort, IBS relief, nausea', pubmed: 'peppermint+digestion' },
  'DGL Licorice': { use: 'Stomach lining support, heartburn relief', pubmed: 'dgl+licorice+stomach' },
  'Aloe Vera': { use: 'Digestive soothing, gut health', pubmed: 'aloe+vera+digestive' },
  'Psyllium': { use: 'Soluble fiber for regularity and cholesterol', pubmed: 'psyllium+fiber' },
  
  // Additional herbs
  'Passionflower': { use: 'Calming herb for anxiety and sleep', pubmed: 'passionflower+anxiety' },
  'Chamomile': { use: 'Gentle relaxation, sleep, digestive comfort', pubmed: 'chamomile+sleep' },
  'Holy Basil': { use: 'Adaptogen for stress, also called Tulsi', pubmed: 'holy+basil+stress' },
  'Ginseng': { use: 'Energy, cognitive function, immune support', pubmed: 'ginseng+energy' },
  'Boswellia': { use: 'Joint and inflammation support', pubmed: 'boswellia+inflammation' },
  'Quercetin': { use: 'Antioxidant, allergy support, immune health', pubmed: 'quercetin+health' },
  'Resveratrol': { use: 'Anti-aging antioxidant from grapes', pubmed: 'resveratrol+longevity' }
};

// Common concerns for quick buttons
const QUICK_CONCERNS = [
  { label: 'üò¥ Sleep', query: 'sleep' },
  { label: '‚ö° Energy', query: 'energy' },
  { label: 'üò∞ Stress', query: 'stress' },
  { label: 'ü¶¥ Joint Pain', query: 'joint pain' },
  { label: 'ü´Ä Heart Health', query: 'heart' },
  { label: 'üß† Focus', query: 'focus' },
  { label: 'üí™ Fitness', query: 'muscle' },
  { label: 'üõ°Ô∏è Immunity', query: 'immune' },
  { label: 'üíá Hair', query: 'hair loss' },
  { label: '‚öñÔ∏è Weight Loss', query: 'weight loss' },
  { label: 'ü©∏ Blood Pressure', query: 'hypertension' }
];

// Common symptom searches for pills
const POPULAR_SYMPTOMS = [
  'sleep', 'energy', 'stress', 'joint pain', 'digestion', 
  'immune', 'focus', 'hair', 'weight loss', 'muscle'
];

// Category definitions with search terms and eBay categories
const CATEGORIES = {
  vitamins: { 
    name: 'Vitamins & Multivitamins', 
    icon: 'üíä',
    categoryId: '180959',
    terms: ['vitamin', 'multivitamin']
  },
  protein: { 
    name: 'Protein & Fitness', 
    icon: 'üí™',
    categoryId: '181337',
    terms: ['protein powder', 'whey protein', 'creatine', 'pre workout', 'bcaa']
  },
  herbal: { 
    name: 'Herbal Supplements', 
    icon: 'üåø',
    categoryId: '180962',
    terms: ['herbal', 'ashwagandha', 'turmeric', 'ginseng', 'echinacea']
  },
  minerals: { 
    name: 'Minerals & Electrolytes', 
    icon: '‚ö°',
    categoryId: '180960',
    terms: ['mineral', 'magnesium', 'zinc', 'calcium', 'electrolytes']
  },
  weight: { 
    name: 'Weight Management', 
    icon: '‚öñÔ∏è',
    categoryId: '181000',
    terms: ['weight loss', 'fat burner', 'appetite', 'metabolism']
  },
  immune: { 
    name: 'Immune Support', 
    icon: 'üõ°Ô∏è',
    categoryId: '180959',
    terms: ['immune', 'vitamin c', 'elderberry', 'zinc immune']
  },
  probiotics: { 
    name: 'Probiotics & Digestive', 
    icon: 'ü¶†',
    categoryId: '181001',
    terms: ['probiotic', 'digestive enzyme', 'gut health', 'fiber supplement']
  },
  omega: { 
    name: 'Omega & Fish Oil', 
    icon: 'üêü',
    categoryId: '180961',
    terms: ['fish oil', 'omega 3', 'krill oil', 'cod liver oil']
  }
};

// Popular brands by category
const BRANDS = {
  vitamins: ['Nature Made', 'NOW Foods', 'Garden of Life', 'Thorne', 'Pure Encapsulations', 'Life Extension'],
  protein: ['Optimum Nutrition', 'Dymatize', 'BSN', 'MuscleTech', 'Orgain', 'Garden of Life'],
  herbal: ['NOW Foods', 'Gaia Herbs', 'Nature\'s Way', 'Solaray', 'Herb Pharm'],
  minerals: ['NOW Foods', 'Nature Made', 'Doctor\'s Best', 'Life Extension', 'Thorne'],
  weight: ['Hydroxycut', 'Cellucor', 'RSP Nutrition', 'Evlution Nutrition'],
  immune: ['Emergen-C', 'Airborne', 'Nature\'s Bounty', 'Sambucol', 'Zicam'],
  probiotics: ['Culturelle', 'Align', 'Garden of Life', 'Renew Life', 'Bio-K+'],
  omega: ['Nordic Naturals', 'Carlson', 'NOW Foods', 'Viva Naturals', 'Sports Research']
};

// State
let selectedCategory = '';
let selectedBrand = '';
let currentPage = 1;
let currentOffset = '';
let hasNextPage = false;

// DOM refs
const categoryBar = document.getElementById('categoryBar');
const brandGroup = document.getElementById('brandGroup');
const brandBar = document.getElementById('brandBar');
const filters = document.getElementById('filters');
const cards = document.getElementById('cards');
const status = document.getElementById('status');
const pagination = document.getElementById('pagination');
const paginationBottom = document.getElementById('paginationBottom');

// Search inputs
const supplementSelect = document.getElementById('supplementSelect');
const supplementSearchBtn = document.getElementById('supplementSearchBtn');

// Guided finder elements
const guidedInput = document.getElementById('guidedInput');
const guidedSearchBtn = document.getElementById('guidedSearchBtn');
const guidedSuggestions = document.getElementById('guidedSuggestions');
const quickConcerns = document.getElementById('quickConcerns');

// Render quick concern buttons
function renderQuickConcerns() {
  quickConcerns.innerHTML = '';
  QUICK_CONCERNS.forEach(concern => {
    const btn = document.createElement('button');
    btn.className = 'symptom-pill';
    btn.textContent = concern.label;
    btn.onclick = () => {
      guidedInput.value = concern.query;
      handleGuidedSearch(concern.query);
    };
    quickConcerns.appendChild(btn);
  });
}

// Handle guided finder search
function handleGuidedSearch(query) {
  const matches = findSymptomMatches(query);
  
  if (matches.length === 0) {
    guidedSuggestions.innerHTML = `
      <div style="padding: 12px; background: #fef3c7; border-radius: 8px; color: #92400e;">
        I couldn't find specific recommendations for "${escapeHTML(query)}". 
        Try describing your concern differently, or search for a specific supplement below.
      </div>
    `;
    return;
  }
  
  const topMatch = matches[0];
  const supplements = topMatch.supplements;
  
  // Build detailed supplement info
  const supplementCards = supplements.map(s => {
    const info = SUPPLEMENT_INFO[s] || { use: 'General wellness support', pubmed: s.toLowerCase().replace(/\\s+/g, '+') };
    const pubmedUrl = `https://pubmed.ncbi.nlm.nih.gov/?term=${info.pubmed}`;
    
    return `
      <div style="background: #fff; border: 1px solid var(--border); border-radius: 10px; padding: 12px; margin: 6px 0;">
        <div style="display: flex; justify-content: space-between; align-items: start; gap: 10px; flex-wrap: wrap;">
          <div style="flex: 1; min-width: 200px;">
            <div style="font-weight: 600; color: var(--primary-dark); font-size: 15px;">${escapeHTML(s)}</div>
            <div style="font-size: 13px; color: var(--muted); margin-top: 4px;">${escapeHTML(info.use)}</div>
          </div>
          <div style="display: flex; gap: 8px; flex-wrap: wrap;">
            <a href="${pubmedUrl}" target="_blank" rel="noopener" 
               style="font-size: 12px; color: #2563eb; text-decoration: none; padding: 4px 8px; background: #eff6ff; border-radius: 4px;">
              üìö View Research
            </a>
            <button onclick="searchSupplement('${escapeHTML(s)}')" 
                    style="font-size: 12px; color: #fff; background: var(--primary); border: none; padding: 4px 10px; border-radius: 4px; cursor: pointer;">
              üõí Shop Products
            </button>
          </div>
        </div>
      </div>
    `;
  }).join('');
  
  guidedSuggestions.innerHTML = `
    <div style="background: #f0fdf4; border-radius: 12px; border: 1px solid var(--accent); overflow: hidden;">
      <div style="padding: 16px; background: #ecfdf5;">
        <div style="font-weight: 600; color: var(--primary-dark); font-size: 16px;">
          Based on "${escapeHTML(topMatch.symptom)}", here are supplements people commonly explore:
        </div>
        <div style="font-size: 13px; color: var(--muted); margin-top: 4px;">
          Each includes a link to peer-reviewed research on PubMed (NIH database)
        </div>
      </div>
      
      <div style="padding: 12px; max-height: 350px; overflow-y: auto;">
        ${supplementCards}
      </div>
      
      <div style="padding: 12px 16px; background: #ecfdf5; border-top: 1px solid var(--accent);">
        <button onclick="searchAllFromGuided('${escapeHTML(topMatch.symptom)}')" 
                style="width: 100%; padding: 12px; background: var(--primary); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">
          üîç Browse All ${supplements.length} Supplement Products
        </button>
      </div>
      
      <div style="padding: 10px 16px; background: #fffbeb; border-top: 1px solid #fef08a; font-size: 11px; color: #854d0e;">
        ‚ö†Ô∏è <strong>Remember:</strong> Supplements affect everyone differently. What works for one person may not work for another. 
        These suggestions are based on common usage patterns, not guaranteed outcomes. Consult your doctor before starting any new supplement.
      </div>
    </div>
  `;
  
  // Also show filters for further searching
  filters.style.display = 'flex';
}

// Search all supplements from guided finder
function searchAllFromGuided(symptom) {
  const supplements = SYMPTOM_MAP[symptom];
  if (!supplements) return;
  
  const query = supplements.slice(0, 3).join(' OR ');
  
  selectedCategory = '';
  selectedBrand = '';
  Array.from(categoryBar.children).forEach(btn => btn.classList.remove('active'));
  brandGroup.style.display = 'none';
  filters.style.display = 'flex';
  
  currentPage = 1;
  currentOffset = '';
  fetchResults(query);
  
  setTimeout(() => {
    document.getElementById('status').scrollIntoView({ behavior: 'smooth', block: 'start' });
  }, 300);
}

// Guided finder event handlers
guidedSearchBtn.onclick = () => {
  const query = guidedInput.value.trim();
  if (!query) {
    guidedSuggestions.innerHTML = `
      <div style="padding: 12px; background: #fef3c7; border-radius: 8px; color: #92400e;">
        Please describe what you're looking for ‚Äî like "trouble sleeping" or "joint pain"
      </div>
    `;
    return;
  }
  handleGuidedSearch(query);
};

guidedInput.addEventListener('keypress', (e) => {
  if (e.key === 'Enter') guidedSearchBtn.click();
});

// Make function available globally
window.searchAllFromGuided = searchAllFromGuided;

// Find matching symptoms
function findSymptomMatches(query) {
  const q = query.toLowerCase().trim();
  if (!q) return [];
  
  const matches = [];
  
  for (const [symptom, supplements] of Object.entries(SYMPTOM_MAP)) {
    if (symptom.includes(q) || q.includes(symptom)) {
      matches.push({ symptom, supplements, exact: symptom === q });
    }
  }
  
  // Sort exact matches first
  matches.sort((a, b) => (b.exact ? 1 : 0) - (a.exact ? 1 : 0));
  
  return matches;
}

// Search for a specific supplement (called from symptom suggestions)
function searchSupplement(name) {
  // Try to find and select the option in dropdown, or just search directly
  const options = Array.from(supplementSelect.options);
  const match = options.find(opt => opt.value.toLowerCase() === name.toLowerCase());
  if (match) {
    supplementSelect.value = match.value;
  }
  
  selectedCategory = '';
  selectedBrand = '';
  Array.from(categoryBar.children).forEach(btn => btn.classList.remove('active'));
  brandGroup.style.display = 'none';
  filters.style.display = 'flex';
  
  currentPage = 1;
  currentOffset = '';
  fetchResults(name);
  
  // Scroll to results
  setTimeout(() => {
    document.getElementById('status').scrollIntoView({ behavior: 'smooth', block: 'start' });
  }, 300);
}

// Search all supplements for a symptom
function searchAllSymptomSupplements(symptom) {
  const supplements = SYMPTOM_MAP[symptom];
  if (!supplements) return;
  
  // Build OR query with top supplements
  const query = supplements.slice(0, 3).join(' OR ');
  
  selectedCategory = '';
  selectedBrand = '';
  Array.from(categoryBar.children).forEach(btn => btn.classList.remove('active'));
  brandGroup.style.display = 'none';
  filters.style.display = 'flex';
  
  currentPage = 1;
  currentOffset = '';
  fetchResults(query);
  
  // Scroll to results
  setTimeout(() => {
    document.getElementById('status').scrollIntoView({ behavior: 'smooth', block: 'start' });
  }, 300);
}

// Make functions available globally
window.searchSupplement = searchSupplement;
window.searchAllSymptomSupplements = searchAllSymptomSupplements;

// Render category buttons
function renderCategoryButtons() {
  categoryBar.innerHTML = '';
  Object.entries(CATEGORIES).forEach(([key, cat]) => {
    const btn = document.createElement('button');
    btn.className = 'pill';
    btn.textContent = `${cat.icon} ${cat.name}`;
    btn.onclick = () => selectCategory(key);
    categoryBar.appendChild(btn);
  });
}

// Select category
function selectCategory(key) {
  selectedCategory = key;
  selectedBrand = '';
  
  // Update UI
  Array.from(categoryBar.children).forEach(btn => {
    btn.classList.toggle('active', btn.textContent.includes(CATEGORIES[key].name));
  });
  
  // Update dropdown
  document.getElementById('typeSelect').value = key;
  
  // Show brand filter
  renderBrandButtons(key);
  brandGroup.style.display = 'block';
  
  // Show filters
  filters.style.display = 'flex';
  
  // Fetch results
  currentPage = 1;
  currentOffset = '';
  fetchResults();
}

// Render brand buttons
function renderBrandButtons(category) {
  brandBar.innerHTML = '';
  
  // Add "All Brands" option
  const allBtn = document.createElement('button');
  allBtn.className = 'pill active';
  allBtn.textContent = 'All Brands';
  allBtn.onclick = () => {
    selectedBrand = '';
    Array.from(brandBar.children).forEach((b, i) => b.classList.toggle('active', i === 0));
    currentPage = 1;
    currentOffset = '';
    fetchResults();
  };
  brandBar.appendChild(allBtn);
  
  // Add brand buttons
  const brands = BRANDS[category] || [];
  brands.forEach(brand => {
    const btn = document.createElement('button');
    btn.className = 'pill';
    btn.textContent = brand;
    btn.onclick = () => {
      selectedBrand = brand;
      Array.from(brandBar.children).forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      currentPage = 1;
      currentOffset = '';
      fetchResults();
    };
    brandBar.appendChild(btn);
  });
}

// Supplement dropdown search
supplementSearchBtn.onclick = () => {
  const query = supplementSelect.value;
  if (!query) {
    alert('Please select a supplement from the dropdown');
    return;
  }
  
  selectedCategory = '';
  selectedBrand = '';
  
  // Clear category pills
  Array.from(categoryBar.children).forEach(btn => btn.classList.remove('active'));
  
  // Show filters
  filters.style.display = 'flex';
  brandGroup.style.display = 'none';
  guidedSuggestions.innerHTML = '';
  
  currentPage = 1;
  currentOffset = '';
  fetchResults(query);
};

// Also search when dropdown changes
supplementSelect.onchange = () => {
  if (supplementSelect.value) {
    supplementSearchBtn.click();
  }
};

// Fetch results from API
async function fetchResults(customQuery = '') {
  const category = selectedCategory || 'vitamins';
  const type = document.getElementById('typeSelect').value;
  const condition = document.getElementById('conditionSelect').value;
  const limit = document.getElementById('limitSelect').value;
  const sort = document.getElementById('sortSelect').value;
  
  // Build query
  let query = customQuery || '';
  if (!query) {
    const cat = CATEGORIES[type];
    query = cat.terms[0];
    if (selectedBrand) {
      query = `${selectedBrand} ${query}`;
    }
  }
  
  status.textContent = 'üîç Searching...';
  cards.innerHTML = '';
  pagination.style.display = 'none';
  paginationBottom.style.display = 'none';
  
  try {
    const params = new URLSearchParams({
      query,
      type,
      limit,
      sort,
      condition,
      offset: currentOffset
    });
    
    if (selectedBrand) params.append('brand', selectedBrand);
    
    const res = await fetch(`/api/search?${params}`);
    const data = await res.json();
    
    if (data.error) {
      status.textContent = `‚ùå Error: ${data.error}`;
      return;
    }
    
    if (!data.items || data.items.length === 0) {
      status.textContent = 'üòî No products found. Try a different search.';
      return;
    }
    
    // Sort results
    let items = data.items;
    if (sort === 'price-low') {
      items.sort((a, b) => parseFloat(a.price) - parseFloat(b.price));
    } else if (sort === 'price-high') {
      items.sort((a, b) => parseFloat(b.price) - parseFloat(a.price));
    }
    
    // Update offset for next page
    currentOffset = data.next || '';
    hasNextPage = !!data.next;
    
    status.textContent = `Found ${data.total?.toLocaleString() || items.length} products`;
    
    renderCards(items);
    updatePagination();
    
  } catch (err) {
    console.error('Fetch error:', err);
    status.textContent = '‚ùå Error loading products. Please try again.';
  }
}

// Render product cards
function renderCards(items) {
  cards.innerHTML = '';
  
  items.forEach(item => {
    const card = document.createElement('div');
    card.className = 'card';
    
    card.innerHTML = `
      <img class="thumb" src="${item.image || 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><rect fill="%23f0f0f0" width="100" height="100"/><text x="50" y="55" text-anchor="middle" fill="%23999" font-size="12">No Image</text></svg>'}" 
           alt="${escapeHTML(item.title)}" 
           loading="lazy"
           onerror="this.src='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect fill=%22%23f8faf8%22 width=%22100%22 height=%22100%22/><text x=%2250%22 y=%2255%22 text-anchor=%22middle%22 fill=%22%23999%22 font-size=%2210%22>No Image</text></svg>'" />
      <div class="content">
        <div class="title">${escapeHTML(item.title || '')}</div>
        <div class="meta">${item.condition || 'New'}</div>
        <div class="meta">üìç ${item.location || 'USA'}</div>
        <div class="price">${formatPrice(item.price, item.currency)}</div>
        <div class="shipping">${escapeHTML(item.shipping_text || '')}</div>
        <a class="btn" href="${item.epn_url}" target="_blank" rel="nofollow noopener"
           onclick="trackClick('${escapeHTML(item.title || '').substring(0, 50)}', ${parseFloat(item.price) || 0})">
          View on eBay
        </a>
      </div>
    `;
    
    cards.appendChild(card);
  });
}

// Track clicks for analytics
function trackClick(title, price) {
  if (typeof gtag !== 'undefined') {
    gtag('event', 'click_to_ebay', {
      'event_category': 'engagement',
      'event_label': title,
      'value': price
    });
  }
}

// Update pagination
function updatePagination() {
  const show = currentPage > 1 || hasNextPage;
  pagination.style.display = show ? 'flex' : 'none';
  paginationBottom.style.display = show ? 'flex' : 'none';
  
  const pageText = `Page ${currentPage}`;
  document.getElementById('pageInfo').textContent = pageText;
  document.getElementById('pageInfoBottom').textContent = pageText;
  
  document.getElementById('prevPage').disabled = currentPage <= 1;
  document.getElementById('prevPageBottom').disabled = currentPage <= 1;
  document.getElementById('nextPage').disabled = !hasNextPage;
  document.getElementById('nextPageBottom').disabled = !hasNextPage;
}

// Pagination handlers
function getCurrentQuery() {
  const suppQuery = supplementSelect.value;
  const sympQuery = guidedInput.value.trim();
  
  if (suppQuery) return suppQuery;
  if (sympQuery && SYMPTOM_MAP[sympQuery.toLowerCase()]) {
    return SYMPTOM_MAP[sympQuery.toLowerCase()].slice(0, 3).join(' OR ');
  }
  return '';
}

document.getElementById('prevPage').onclick = 
document.getElementById('prevPageBottom').onclick = () => {
  if (currentPage > 1) {
    currentPage = 1;
    currentOffset = '';
    fetchResults(getCurrentQuery());
    document.getElementById('status').scrollIntoView({ behavior: 'smooth', block: 'start' });
  }
};

document.getElementById('nextPage').onclick =
document.getElementById('nextPageBottom').onclick = () => {
  if (hasNextPage) {
    currentPage++;
    fetchResults(getCurrentQuery());
    document.getElementById('status').scrollIntoView({ behavior: 'smooth', block: 'start' });
  }
};

// Refresh button
document.getElementById('refreshBtn').onclick = () => {
  currentPage = 1;
  currentOffset = '';
  const suppQuery = supplementSelect.value;
  const sympQuery = guidedInput.value.trim();
  
  if (suppQuery) {
    fetchResults(suppQuery);
  } else if (sympQuery && SYMPTOM_MAP[sympQuery.toLowerCase()]) {
    const supplements = SYMPTOM_MAP[sympQuery.toLowerCase()];
    fetchResults(supplements.slice(0, 3).join(' OR '));
  } else if (selectedCategory) {
    fetchResults();
  }
};

// Filter change handlers
document.getElementById('typeSelect').onchange = () => {
  selectedCategory = document.getElementById('typeSelect').value;
  selectedBrand = '';
  brandGroup.style.display = 'none';
  currentPage = 1;
  currentOffset = '';
  fetchResults(getCurrentQuery());
};

// Helpers
function formatPrice(value, currency) {
  if (!value) return '';
  try {
    return new Intl.NumberFormat('en-US', { 
      style: 'currency', 
      currency: currency || 'USD' 
    }).format(Number(value));
  } catch {
    return `$${value}`;
  }
}

function escapeHTML(str) {
  return String(str).replace(/[&<>"']/g, c => 
    ({ '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#39;' }[c])
  );
}

// Fetch live inventory counts
async function updateInventoryCounts() {
  try {
    const [vitRes, protRes, herbRes] = await Promise.all([
      fetch('/api/search?type=vitamins&limit=1'),
      fetch('/api/search?type=protein&limit=1'),
      fetch('/api/search?type=herbal&limit=1')
    ]);
    
    const [vitData, protData, herbData] = await Promise.all([
      vitRes.json(), protRes.json(), herbRes.json()
    ]);
    
    const format = n => n ? `<strong>${n.toLocaleString()}+</strong>` : '<strong>1,000+</strong>';
    
    document.getElementById('vitaminCount').innerHTML = format(vitData.total);
    document.getElementById('proteinCount').innerHTML = format(protData.total);
    document.getElementById('herbalCount').innerHTML = format(herbData.total);
    
  } catch (err) {
    console.error('Count error:', err);
    document.getElementById('vitaminCount').innerHTML = '<strong>10,000+</strong>';
    document.getElementById('proteinCount').innerHTML = '<strong>8,000+</strong>';
    document.getElementById('herbalCount').innerHTML = '<strong>5,000+</strong>';
  }
}

// Initialize
renderCategoryButtons();
renderQuickConcerns();
updateInventoryCounts();

// Handle URL params for deep linking
function handleUrlParams() {
  const params = new URLSearchParams(window.location.search);
  const category = params.get('category');
  const query = params.get('q');
  const symptom = params.get('symptom');
  const brand = params.get('brand');
  
  if (symptom) {
    guidedInput.value = symptom;
    setTimeout(() => handleGuidedSearch(symptom), 200);
  } else if (category && CATEGORIES[category]) {
    setTimeout(() => selectCategory(category), 200);
    
    if (brand) {
      setTimeout(() => {
        selectedBrand = brand;
        const brandBtns = Array.from(brandBar.children);
        brandBtns.forEach(btn => {
          btn.classList.toggle('active', btn.textContent === brand);
        });
        fetchResults();
      }, 400);
    }
  } else if (query) {
    // Try to match query to a dropdown option
    const options = Array.from(supplementSelect.options);
    const match = options.find(opt => opt.value.toLowerCase() === query.toLowerCase());
    if (match) {
      supplementSelect.value = match.value;
    }
    setTimeout(() => {
      fetchResults(query);
      filters.style.display = 'flex';
    }, 200);
  }
}

handleUrlParams();
</script>

</body>
</html>
